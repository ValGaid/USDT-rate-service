# USDT-rate-service


## Описание

Это сервис для получения и обработки данных о курсе USDT, 
который использует gRPC и Prometheus для мониторинга, 
Jaeger для трассировки и PostgreSQL для хранения данных.

## Запуск проекта

### 1. Запуск с использованием Docker Compose

Для того чтобы запустить проект с использованием Docker Compose,
выполните команду:

```bash
make up
```
Эта команда поднимет все сервисы, включая базу данных PostgreSQL,
 Prometheus, Jaeger и сам сервис USDT.

Проект поддерживает конфигурацию параметров через переменные окружения и флаги запуска.
 Все параметры можно задать в файле .env

Параметры конфигурации
```
LOG_LEVEL=DEBUG

HOST=usdt
PORT=50051

TRACE_HOST=jaeger
TRACE_PORT=14268

DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=postgres
DB_SSLMODE=disable

GF_SECURITY_ADMIN_PASSWORD=admin
```
Для того чтобы запустить проект с флагами выполните команду:
```bash
make run-f
```
и далее поднимите контейнер с Jaeger для работы трассировок
выполните команду:
```bash
make run-jaeger
```

1.Метрики через HTTP
Ваш сервис будет доступен для сбора метрик по следующему адресу:
http://localhost:8080/metrics
Эти метрики могут быть собраны Prometheus для дальнейшего мониторинга.

2. Prometheus будет доступен по адресу: http://localhost:9090
Для того чтобы Prometheus собирал метрики с вашего сервиса, 
он настроен на сбор метрик с http://host.docker.internal:8080/metrics. 
Это позволяет собирать метрики даже если сервис работает в контейнере.

3. Jaeger будет доступен по адресу: http://localhost:16686
Используйте этот интерфейс для трассировки запросов 
и анализа производительности вашего сервиса.

